<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Daaru Desi - Cocktails üç∏üé¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Make it behave like an app when added to iPad home screen -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <style>
    :root {
      --bg: #05060a;
      --card: #11131b;
      --accent: #f4c542;
      --accent-soft: rgba(244, 197, 66, 0.15);
      --text: #f5f5f5;
      --muted: #a6a7b0;
      --chip-bg: #1b1e28;
      --chip-active: #f4c542;
      --chip-active-text: #11131b;
      --danger: #ff6b6b;
      --radius-lg: 18px;
      --radius-md: 999px;
      --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.45);
      --gradient-start: #111523;
      --gradient-end: #05060a;
      
      /* Transition for smooth theme changes */
      transition: background 0.4s ease, color 0.4s ease;
    }

    /* Theme definitions */
    [data-theme="gin"] {
      --accent: #4ecdc4;
      --accent-soft: rgba(78, 205, 196, 0.15);
      --chip-active: #4ecdc4;
      --gradient-start: #0d2818;
      --gradient-end: #050a08;
    }

    [data-theme="tequila"] {
      --accent: #ffa726;
      --accent-soft: rgba(255, 167, 38, 0.15);
      --chip-active: #ffa726;
      --gradient-start: #2a1a0d;
      --gradient-end: #0a0605;
    }

    [data-theme="whiskey"] {
      --accent: #d4a574;
      --accent-soft: rgba(212, 165, 116, 0.15);
      --chip-active: #d4a574;
      --gradient-start: #1f1610;
      --gradient-end: #0a0705;
    }

    [data-theme="rum"] {
      --accent: #ff6b9d;
      --accent-soft: rgba(255, 107, 157, 0.15);
      --chip-active: #ff6b9d;
      --gradient-start: #1a1020;
      --gradient-end: #070509;
    }

    [data-theme="mocktails"] {
      --accent: #a8c7a8;
      --accent-soft: rgba(168, 199, 168, 0.15);
      --chip-active: #a8c7a8;
      --gradient-start: #141a14;
      --gradient-end: #060806;
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Helvetica Neue", sans-serif;
      background: radial-gradient(circle at top left, var(--gradient-start) 0, var(--gradient-end) 55%);
      color: var(--text);
      display: flex;
      justify-content: center;
      min-height: 100vh;
      transition: background 0.5s ease;
    }

    .app {
      width: 100%;
      max-width: 520px;
      padding: 18px 16px 28px;
    }

    header {
      padding: 8px 4px 18px;
    }

    header h1 {
      margin: 0;
      font-size: clamp(1.4rem, 5vw, 2rem);
      letter-spacing: 0.04em;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    header p {
      margin: 4px 0 0;
      font-size: 1.05rem;
      color: var(--muted);
    }

    .card {
      background: linear-gradient(145deg, #10131f, #070812);
      border-radius: 24px;
      padding: 18px 16px 16px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(255, 255, 255, 0.03);
      margin-bottom: 14px;
      transition: border-color 0.4s ease;
    }

    .card h2 {
      margin: 0 0 10px;
      font-size: 1.3rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .step-badge {
      font-size: 0.8rem;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(244, 197, 66, 0.35);
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 6px;
    }

    .chip {
      flex: 1 0 calc(50% - 8px);
      padding: 12px 14px;
      border-radius: var(--radius-md);
      background: var(--chip-bg);
      color: var(--text);
      border: 1px solid transparent;
      font-size: 1.05rem;
      text-align: center;
      cursor: pointer;
      user-select: none;
      transition: background 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }

    .chip.small {
      flex: 0 0 auto;
      padding-inline: 16px;
      font-size: 1rem;
    }

    .chip span.subtitle {
      display: block;
      font-size: 0.8rem;
      color: var(--muted);
      margin-top: 3px;
    }

    .chip .recipe-badge {
      position: absolute;
      top: -6px;
      right: -6px;
      background: var(--accent);
      color: var(--chip-active-text);
      font-size: 0.75rem;
      font-weight: 600;
      padding: 4px 8px;
      border-radius: 999px;
      border: 2px solid var(--bg);
      min-width: 24px;
      text-align: center;
    }

    .chip {
      position: relative;
    }

    .chip.active {
      background: var(--chip-active);
      color: var(--chip-active-text);
      border-color: var(--chip-active);
    }

    .chip.active span.subtitle {
      color: rgba(0, 0, 0, 0.7);
    }

    .chip.active .recipe-badge {
      background: var(--chip-active-text);
      color: var(--accent);
      border-color: var(--accent);
    }

    .hint {
      font-size: 0.9rem;
      color: var(--muted);
      margin-top: 6px;
    }

    /* Recipe area */

    .recipe-shell {
      margin-top: 8px;
      border-radius: 22px;
      background: radial-gradient(circle at top left, #1d2030 0, #05060a 60%);
      border: 1px solid rgba(255, 255, 255, 0.06);
      padding: 14px 13px 12px;
      position: relative;
      overflow: hidden;
    }

    .swipe-hint {
      font-size: 0.75rem;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 3px;
      opacity: 0.7;
    }

    .swipe-hint span {
      font-size: 0.85rem;
    }

    .recipe-card {
      min-height: 200px;
      transition: transform 0.25s ease-out, opacity 0.25s ease-out;
    }

    .recipe-title {
      font-size: 1.35rem;
      margin: 0 0 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .pill {
      font-size: 0.7rem;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(244, 197, 66, 0.4);
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin: 4px 0 8px;
    }

    .tag {
      font-size: 0.8rem;
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.05);
      color: var(--muted);
    }

    .recipe-section-title {
      font-size: 0.95rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--muted);
      margin: 10px 0 6px;
    }

    ul, ol {
      margin: 0;
      padding-left: 20px;
      font-size: 0.95rem;
      color: #d9d9e1;
      line-height: 1.5;
    }

    li + li {
      margin-top: 4px;
    }

    .nav-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 10px;
      gap: 10px;
      flex-wrap: wrap;
    }

    .nav-row > * {
      flex-shrink: 0;
    }

    .nav-buttons {
      display: flex;
      gap: 6px;
    }

    .nav-btn {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.24);
      background: rgba(255, 255, 255, 0.02);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text);
      font-size: 1rem;
      cursor: pointer;
    }

    .nav-btn:disabled {
      opacity: 0.35;
      cursor: default;
    }

    .dots {
      display: flex;
      gap: 4px;
      align-items: center;
    }

    .dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.15);
    }

    .dot.active {
      width: 14px;
      background: var(--accent);
    }

    .recipe-counter {
      font-size: 0.9rem;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .recipe-counter .current {
      color: var(--accent);
      font-weight: 600;
    }

    .empty-state {
      text-align: center;
      font-size: 1rem;
      color: var(--muted);
      padding: 22px 5px 10px;
    }
  </style>
</head>
<body>
<div class="app">
  <header>
    <h1>Daaru Desi - Cocktails üç∏üé¨</h1>
    <p>Pick your spirit, choose your vibe, follow the recipe. Then go make it on the bar ‚ú®</p>
  </header>

  <!-- STEP 1: Spirit -->
  <section class="card" id="step-spirit">
    <h2>
      <span class="step-badge">Step 1</span>
      Pick your spirit
    </h2>
    <div class="chip-row" id="spiritRow">
      <!-- Spirit chips will be injected via JS -->
    </div>
    <div class="hint">Tap one. You can change it anytime.</div>
  </section>

  <!-- STEP 2: Effort / vibe -->
  <section class="card" id="step-effort">
    <h2>
      <span class="step-badge">Step 2</span>
      Pick your vibe
    </h2>
    <div class="chip-row" id="effortRow">
      <button class="chip small" data-effort="easy">Easy<span class="subtitle">Zero thinking</span></button>
      <button class="chip small" data-effort="medium">Medium<span class="subtitle">Feel like a bartender</span></button>
      <button class="chip small" data-effort="fancy">Fancy<span class="subtitle">Make Instagram proud</span></button>
    </div>
    <div class="hint">Effort = number of steps / ingredients.</div>
  </section>

  <!-- STEP 3: Recipe viewer -->
  <section class="card" id="step-recipe">
    <h2>
      <span class="step-badge">Step 3</span>
      Make the drink
    </h2>

    <div class="recipe-shell" id="recipeShell">
      <div class="recipe-card" id="recipeCard"></div>

      <div class="nav-row">
        <div class="nav-buttons">
          <button class="nav-btn" id="prevBtn" aria-label="Previous recipe">‚Äπ</button>
          <button class="nav-btn" id="nextBtn" aria-label="Next recipe">‚Ä∫</button>
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div class="recipe-counter" id="recipeCounter">
            <span class="current">1</span> of <span>1</span>
          </div>
          <div class="swipe-hint"><span>‚Üê‚Üí</span> swipe</div>
        </div>
        <div class="dots" id="dots"></div>
      </div>
    </div>
  </section>

</div>

<script>
  // ====== DATA: EDIT THIS SECTION TO CHANGE RECIPES ======
  const recipesData = {
    gin: {
      label: "Gin",
      vibes: {
        easy: [
          {
            name: "Dil Chahta Hai",
            drinkName: "Gin & Tonic",
            tags: ["Tall glass", "Ice heavy"],
            ingredients: [
              "45 ml gin",
              "Top with tonic water",
              "Lime wedge"
            ],
            steps: [
              "Fill the glass to the top with ice.",
              "Pour in gin and top with tonic water.",
              "Give a gentle stir, squeeze in lime wedge and drop it in."
            ]
          },
          {
            name: "Queen",
            drinkName: "Gin Rickey",
            tags: ["Light", "Citrusy"],
            ingredients: [
              "45 ml gin",
              "Half lime, squeezed",
              "Top with soda water"
            ],
            steps: [
              "Fill glass with ice.",
              "Squeeze in lime, drop the shell in.",
              "Add gin and top with soda water. Stir once."
            ]
          }
        ],
        medium: [
          {
            name: "Jab We Met",
            drinkName: "Basil Gin Smash",
            tags: ["Fresh", "Herby"],
            ingredients: [
              "45 ml gin",
              "Small handful basil or mint",
              "20 ml lime juice",
              "15 ml simple syrup",
              "Ice"
            ],
            steps: [
              "In the glass, lightly muddle basil/mint with lime juice and syrup.",
              "Add ice and gin.",
              "Stir well and garnish with a basil sprig."
            ]
          },
          {
            name: "Yeh Jawaani Hai Deewani",
            drinkName: "Cucumber Gimlet",
            tags: ["Crisp", "Elegant"],
            ingredients: [
              "45 ml gin",
              "20 ml lime juice",
              "15 ml simple syrup",
              "3-4 cucumber slices",
              "Ice"
            ],
            steps: [
              "Muddle cucumber slices in shaker.",
              "Add gin, lime juice, simple syrup, and ice.",
              "Shake for 10 seconds and strain into glass.",
              "Garnish with cucumber ribbon."
            ]
          }
        ],
        fancy: [
          {
            name: "Kabhi Khushi Kabhie Gham",
            drinkName: "Garden G&T",
            tags: ["Showy", "Garnish heavy"],
            ingredients: [
              "45 ml gin",
              "Tonic water",
              "Cucumber slices",
              "Mint",
              "Citrus wheels"
            ],
            steps: [
              "Fill a large glass with ice and cucumber slices.",
              "Add gin and top with tonic.",
              "Layer citrus wheels on the side and crown with mint."
            ]
          },
          {
            name: "Dilwale Dulhania Le Jayenge",
            drinkName: "Elderflower Gin Fizz",
            tags: ["Floral", "Instagram-worthy"],
            ingredients: [
              "45 ml gin",
              "20 ml elderflower liqueur (or syrup)",
              "20 ml lemon juice",
              "Top with prosecco or champagne",
              "Edible flowers (optional)"
            ],
            steps: [
              "Add gin, elderflower, and lemon juice to glass with ice.",
              "Stir gently.",
              "Top with prosecco or champagne.",
              "Garnish with edible flowers if available."
            ]
          }
        ]
      }
    },

    tequila: {
      label: "Tequila",
      vibes: {
        easy: [
          {
            name: "Rang De Basanti",
            drinkName: "Tequila Soda",
            tags: ["Light", "Sessionable"],
            ingredients: [
              "45 ml tequila",
              "Top with soda water",
              "Lime wedge"
            ],
            steps: [
              "Fill glass with ice.",
              "Add tequila and top with soda water.",
              "Squeeze lime and drop it in."
            ]
          },
          {
            name: "Lagaan",
            drinkName: "Paloma",
            tags: ["Grapefruit", "Refreshing"],
            ingredients: [
              "45 ml tequila",
              "Top with grapefruit soda (or juice + soda)",
              "Lime wedge",
              "Salt rim (optional)"
            ],
            steps: [
              "Salt the rim if desired.",
              "Fill glass with ice.",
              "Add tequila and top with grapefruit soda.",
              "Squeeze lime and stir gently."
            ]
          }
        ],
        medium: [
          {
            name: "3 Idiots",
            drinkName: "Easy Margarita",
            tags: ["Party classic"],
            ingredients: [
              "45 ml tequila",
              "60 ml margarita mix or limeade",
              "Salt or Taj√≠n for rim",
              "Lime wheel"
            ],
            steps: [
              "Rim glass with lime then dip into salt/Taj√≠n.",
              "Add ice to the glass.",
              "Shake tequila and mix with ice (or just build in glass) and pour.",
              "Garnish with lime wheel."
            ]
          },
          {
            name: "Kuch Kuch Hota Hai",
            drinkName: "Tequila Sunrise",
            tags: ["Sweet", "Colorful"],
            ingredients: [
              "45 ml tequila",
              "90 ml orange juice",
              "15 ml grenadine",
              "Orange slice & cherry"
            ],
            steps: [
              "Fill glass with ice.",
              "Add tequila and orange juice, stir.",
              "Slowly pour grenadine down the side‚Äîit will sink and create sunrise effect.",
              "Garnish with orange slice and cherry."
            ]
          }
        ],
        fancy: [
          {
            name: "Dangal",
            drinkName: "Spicy Margarita",
            tags: ["Spicy", "Instagramable"],
            ingredients: [
              "45 ml tequila",
              "60 ml margarita mix or lime + simple syrup",
              "2‚Äì3 jalape√±o slices",
              "Taj√≠n rim"
            ],
            steps: [
              "Rim glass with Taj√≠n.",
              "Muddle jalape√±o with mix in shaker.",
              "Add tequila + ice, shake, and strain over fresh ice.",
              "Garnish with jalape√±o slice."
            ]
          },
          {
            name: "Gangs of Wasseypur",
            drinkName: "Smoky Mezcal Margarita",
            tags: ["Smoky", "Complex"],
            ingredients: [
              "30 ml tequila",
              "15 ml mezcal",
              "30 ml lime juice",
              "20 ml agave syrup",
              "Smoked salt rim"
            ],
            steps: [
              "Rim glass with smoked salt.",
              "Add all ingredients to shaker with ice.",
              "Shake hard for 12 seconds.",
              "Strain over fresh ice and garnish with lime wheel."
            ]
          }
        ]
      }
    },

    whiskey: {
      label: "Whiskey",
      vibes: {
        easy: [
          {
            name: "Sholay",
            drinkName: "Whiskey Ginger",
            tags: ["Crowd pleaser"],
            ingredients: [
              "45 ml whiskey",
              "Top with ginger ale",
              "Lime wedge"
            ],
            steps: [
              "Fill glass with ice.",
              "Add whiskey and top with ginger ale.",
              "Squeeze lime and stir once."
            ]
          },
          {
            name: "Chennai Express",
            drinkName: "Whiskey Cola",
            tags: ["Classic", "Simple"],
            ingredients: [
              "45 ml whiskey",
              "Top with cola",
              "Lemon wedge (optional)"
            ],
            steps: [
              "Fill glass with ice.",
              "Add whiskey and top with cola.",
              "Stir gently and garnish with lemon if you have it."
            ]
          }
        ],
        medium: [
          {
            name: "Gully Boy",
            drinkName: "Whiskey Sour",
            tags: ["Tart", "Shaken"],
            ingredients: [
              "45 ml whiskey",
              "30 ml lemon juice",
              "20 ml simple syrup",
              "Ice"
            ],
            steps: [
              "Add all ingredients into shaker with ice.",
              "Shake hard for 10‚Äì12 seconds.",
              "Strain into glass with fresh ice.",
              "Garnish with orange slice if you have it."
            ]
          },
          {
            name: "Barfi",
            drinkName: "Mint Julep",
            tags: ["Southern", "Refreshing"],
            ingredients: [
              "60 ml whiskey (or bourbon)",
              "10 ml simple syrup",
              "8-10 mint leaves",
              "Crushed ice"
            ],
            steps: [
              "Muddle mint leaves with simple syrup in glass.",
              "Fill glass with crushed ice.",
              "Add whiskey and stir until glass frosts.",
              "Top with more crushed ice and mint sprig."
            ]
          }
        ],
        fancy: [
          {
            name: "Devdas",
            drinkName: "Old Fashioned",
            tags: ["Spirit-forward"],
            ingredients: [
              "60 ml whiskey",
              "1 barspoon simple syrup",
              "2‚Äì3 dashes bitters (optional)",
              "Orange peel"
            ],
            steps: [
              "In a rocks glass, add syrup and bitters.",
              "Add a big ice cube if you have one.",
              "Pour whiskey over and stir 10‚Äì15 seconds.",
              "Express orange peel over the glass and drop it in."
            ]
          },
          {
            name: "Rockstar",
            drinkName: "Manhattan",
            tags: ["Sophisticated", "Stirred"],
            ingredients: [
              "60 ml whiskey or rye",
              "30 ml sweet vermouth",
              "2 dashes bitters",
              "Cocktail cherry"
            ],
            steps: [
              "Add whiskey, vermouth, and bitters to mixing glass with ice.",
              "Stir for 15-20 seconds.",
              "Strain into chilled coupe or rocks glass.",
              "Garnish with cocktail cherry."
            ]
          }
        ]
      }
    },

    rum: {
      label: "Rum",
      vibes: {
        easy: [
          {
            name: "Andaz Apna Apna",
            drinkName: "Rum & Coke",
            tags: ["No-brainer"],
            ingredients: [
              "45 ml rum",
              "Top with cola",
              "Lime wedge"
            ],
            steps: [
              "Fill glass with ice.",
              "Add rum and top with cola.",
              "Garnish with lime wedge."
            ]
          },
          {
            name: "Chak De India",
            drinkName: "Dark & Stormy",
            tags: ["Ginger", "Bold"],
            ingredients: [
              "45 ml dark rum",
              "Top with ginger beer",
              "Lime wedge"
            ],
            steps: [
              "Fill glass with ice.",
              "Add rum and top with ginger beer.",
              "Squeeze lime wedge and drop it in."
            ]
          }
        ],
        medium: [
          {
            name: "Wake Up Sid",
            drinkName: "Lazy Mojito",
            tags: ["Refreshing"],
            ingredients: [
              "45 ml rum",
              "Mint leaves",
              "Half lime, cut",
              "1‚Äì2 tsp sugar or simple syrup",
              "Top with soda"
            ],
            steps: [
              "Muddle mint, lime pieces, and sugar in the glass.",
              "Add ice and rum.",
              "Top with soda water and give a quick stir."
            ]
          },
          {
            name: "Tashan",
            drinkName: "Rum Punch",
            tags: ["Fruity", "Party-ready"],
            ingredients: [
              "45 ml rum",
              "30 ml orange juice",
              "30 ml pineapple juice",
              "15 ml lime juice",
              "Splash of grenadine"
            ],
            steps: [
              "Add all ingredients to shaker with ice.",
              "Shake for 8-10 seconds.",
              "Strain over ice in glass.",
              "Garnish with orange slice and cherry."
            ]
          }
        ],
        fancy: [
          {
            name: "Hera Pheri",
            drinkName: "Pineapple Rum Highball",
            tags: ["Tropical"],
            ingredients: [
              "45 ml rum",
              "60 ml pineapple juice (or mixer)",
              "Top with soda",
              "Citrus wheel + mint"
            ],
            steps: [
              "Fill glass with ice.",
              "Add rum and pineapple juice.",
              "Top with soda water and stir.",
              "Garnish with citrus wheel and mint."
            ]
          },
          {
            name: "Munna Bhai M.B.B.S.",
            drinkName: "Mai Tai",
            tags: ["Tiki", "Complex"],
            ingredients: [
              "45 ml rum (mix light & dark if you have both)",
              "20 ml orange liqueur or triple sec",
              "15 ml lime juice",
              "10 ml orgeat or almond syrup",
              "Mint sprig & lime"
            ],
            steps: [
              "Add rum, orange liqueur, lime juice, and orgeat to shaker with ice.",
              "Shake hard for 10 seconds.",
              "Strain over crushed ice or regular ice.",
              "Garnish with mint sprig and lime wheel."
            ]
          }
        ]
      }
    },

    mocktails: {
      label: "Mocktails",
      vibes: {
        easy: [
          {
            name: "Taare Zameen Par",
            drinkName: "Virgin Mojito",
            tags: ["Minty", "No alcohol"],
            ingredients: [
              "Mint leaves",
              "Half lime, cut",
              "1‚Äì2 tsp sugar or simple syrup",
              "Top with soda water",
              "Ice"
            ],
            steps: [
              "Muddle mint, lime pieces, and sugar in the glass.",
              "Fill with ice.",
              "Top with soda water and stir gently.",
              "Garnish with mint sprig."
            ]
          },
          {
            name: "English Vinglish",
            drinkName: "Cucumber Limeade",
            tags: ["Crisp", "Refreshing"],
            ingredients: [
              "4-5 cucumber slices",
              "30 ml lime juice",
              "20 ml simple syrup",
              "Top with soda water",
              "Ice"
            ],
            steps: [
              "Muddle cucumber slices in glass.",
              "Add lime juice and simple syrup.",
              "Fill with ice and top with soda.",
              "Garnish with cucumber ribbon."
            ]
          }
        ],
        medium: [
          {
            name: "Veer-Zaara",
            drinkName: "Sunrise Mocktail",
            tags: ["Fruity", "Colorful"],
            ingredients: [
              "90 ml orange juice",
              "15 ml grenadine",
              "Splash of pineapple juice",
              "Orange slice & cherry"
            ],
            steps: [
              "Fill glass with ice.",
              "Add orange juice and pineapple juice, stir.",
              "Slowly pour grenadine down the side for sunrise effect.",
              "Garnish with orange slice and cherry."
            ]
          },
          {
            name: "PK",
            drinkName: "Ginger Lime Fizz",
            tags: ["Spicy", "Zingy"],
            ingredients: [
              "30 ml lime juice",
              "20 ml ginger syrup (or fresh ginger + syrup)",
              "Top with soda water",
              "Lime wheel",
              "Ice"
            ],
            steps: [
              "Add lime juice and ginger syrup to glass.",
              "Fill with ice and top with soda.",
              "Stir well and garnish with lime wheel."
            ]
          }
        ],
        fancy: [
          {
            name: "Om Shanti Om",
            drinkName: "Berry Basil Sparkler",
            tags: ["Elegant", "Garden-fresh"],
            ingredients: [
              "4-5 fresh berries (strawberry, raspberry)",
              "4-5 basil leaves",
              "20 ml lemon juice",
              "15 ml simple syrup",
              "Top with sparkling water"
            ],
            steps: [
              "Muddle berries and basil with lemon juice and syrup.",
              "Fill glass with ice.",
              "Top with sparkling water and stir gently.",
              "Garnish with whole berries and basil sprig."
            ]
          },
          {
            name: "My Name is Khan",
            drinkName: "Virgin Pi√±a Colada",
            tags: ["Tropical", "Creamy"],
            ingredients: [
              "60 ml pineapple juice",
              "60 ml coconut cream",
              "Splash of lime juice",
              "Pineapple wedge & cherry",
              "Ice"
            ],
            steps: [
              "Add pineapple juice, coconut cream, lime, and ice to blender.",
              "Blend until smooth.",
              "Pour into glass and garnish with pineapple wedge and cherry.",
              "Optional: rim glass with toasted coconut."
            ]
          }
        ]
      }
    }
  };

  const spiritOrder = ["gin", "tequila", "whiskey", "rum", "mocktails"];

  // ====== STATE ======
  let currentSpirit = "gin";
  let currentEffort = "easy";
  let currentIndex = 0;

  // ====== THEME SWITCHING ======
  function setTheme(spirit) {
    document.documentElement.setAttribute('data-theme', spirit);
  }

  // ====== ELEMENTS ======
  const spiritRow = document.getElementById("spiritRow");
  const effortRow = document.getElementById("effortRow");
  const recipeCard = document.getElementById("recipeCard");
  const dotsEl = document.getElementById("dots");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  const recipeShell = document.getElementById("recipeShell");
  const recipeCounter = document.getElementById("recipeCounter");

  // ====== INIT SPIRIT CHIPS ======
  function renderSpiritChips() {
    spiritRow.innerHTML = "";
    spiritOrder.forEach((key) => {
      const s = recipesData[key];
      
      // Count total recipes for this spirit across all vibes
      const totalRecipes = Object.values(s.vibes).reduce((sum, recipes) => sum + recipes.length, 0);
      
      const btn = document.createElement("button");
      btn.className = "chip";
      btn.dataset.spirit = key;
      btn.innerHTML = `
        ${s.label}
        <span class="subtitle">${
          key === "whiskey"
            ? "Comfort, campfire, cozy"
            : key === "gin"
            ? "Fresh & botanical"
            : key === "tequila"
            ? "Party, salt & lime"
            : key === "rum"
            ? "Tropical & fun"
            : "Zero proof, full flavor"
        }</span>
        <span class="recipe-badge">${totalRecipes}</span>
      `;
      if (key === currentSpirit) btn.classList.add("active");
      btn.addEventListener("click", () => {
        currentSpirit = key;
        currentIndex = 0;
        setTheme(key); // Apply theme
        updateActiveSpirit();
        renderRecipe();
      });
      spiritRow.appendChild(btn);
    });
  }

  function updateActiveSpirit() {
    [...spiritRow.querySelectorAll(".chip")].forEach((chip) => {
      chip.classList.toggle("active", chip.dataset.spirit === currentSpirit);
    });
  }

  // ====== EFFORT BUTTONS ======
  [...effortRow.querySelectorAll(".chip")].forEach((chip) => {
    chip.addEventListener("click", () => {
      currentEffort = chip.dataset.effort;
      currentIndex = 0;
      [...effortRow.querySelectorAll(".chip")].forEach((c) =>
        c.classList.toggle("active", c === chip)
      );
      renderRecipe();
    });
  });
  // Default effort
  effortRow.querySelector('[data-effort="easy"]').classList.add("active");

  // ====== GET CURRENT RECIPE LIST ======
  function getCurrentRecipes() {
    const spirit = recipesData[currentSpirit];
    if (!spirit) return [];
    const group = spirit.vibes[currentEffort] || [];
    return group;
  }

  // ====== RENDER RECIPE ======
  function renderRecipe(direction = 0) {
    const list = getCurrentRecipes();

    if (!list.length) {
      recipeCard.innerHTML =
        '<div class="empty-state">No recipes here yet. Try a different vibe or add one in the code.</div>';
      dotsEl.innerHTML = "";
      recipeCounter.innerHTML = '<span class="current">0</span> of <span>0</span>';
      prevBtn.disabled = true;
      nextBtn.disabled = true;
      return;
    }

    if (currentIndex >= list.length) currentIndex = list.length - 1;
    if (currentIndex < 0) currentIndex = 0;

    const r = list[currentIndex];

    // Update counter
    recipeCounter.innerHTML = `<span class="current">${currentIndex + 1}</span> of <span>${list.length}</span>`;

    // Simple slide animation
    recipeCard.style.transform = `translateX(${direction * -25}px)`;
    recipeCard.style.opacity = 0;

    setTimeout(() => {
      recipeCard.innerHTML = `
        <div class="recipe-title">
          <span>${r.name}</span>
          <span class="pill">${recipesData[currentSpirit].label.toUpperCase()} ‚Ä¢ ${currentEffort.toUpperCase()}</span>
        </div>
        ${r.drinkName ? `<div style="font-size: 0.85rem; color: var(--muted); margin-bottom: 6px;">${r.drinkName}</div>` : ''}
        <div class="tags">
          ${r.tags ? r.tags.map((t) => `<span class="tag">${t}</span>`).join("") : ""}
        </div>
        <div class="recipe-section-title">Ingredients</div>
        <ul>
          ${r.ingredients.map((i) => `<li>${i}</li>`).join("")}
        </ul>
        <div class="recipe-section-title">Steps</div>
        <ol>
          ${r.steps.map((s) => `<li>${s}</li>`).join("")}
        </ol>
      `;
      recipeCard.style.transform = "translateX(0)";
      recipeCard.style.opacity = 1;
    }, 120);

    // Dots
    dotsEl.innerHTML = "";
    list.forEach((_, idx) => {
      const d = document.createElement("div");
      d.className = "dot" + (idx === currentIndex ? " active" : "");
      dotsEl.appendChild(d);
    });

    prevBtn.disabled = currentIndex === 0;
    nextBtn.disabled = currentIndex === list.length - 1;
  }

  prevBtn.addEventListener("click", () => {
    currentIndex--;
    renderRecipe(-1);
  });

  nextBtn.addEventListener("click", () => {
    currentIndex++;
    renderRecipe(1);
  });

  // ====== SWIPE SUPPORT ======
  let touchStartX = null;

  recipeShell.addEventListener("touchstart", (e) => {
    touchStartX = e.changedTouches[0].clientX;
  });

  recipeShell.addEventListener("touchend", (e) => {
    if (touchStartX === null) return;
    const dx = e.changedTouches[0].clientX - touchStartX;
    const threshold = 40; // pixels
    if (dx > threshold && currentIndex > 0) {
      currentIndex--;
      renderRecipe(-1);
    } else if (dx < -threshold && currentIndex < getCurrentRecipes().length - 1) {
      currentIndex++;
      renderRecipe(1);
    }
    touchStartX = null;
  });

  // ====== INIT ======
  setTheme(currentSpirit); // Set initial theme
  renderSpiritChips();
  renderRecipe();
</script>
</body>
</html>
